# Copilot Instructions for Planet Generator AI Evolution System

## Project Overview

This is a Java-based procedural generation system that creates alien planets and evolves AI creatures to adapt to their environments. The project uses a **trait-based evolution model** where creatures gain/lose/modify attributes based on their planet type and atmosphere.

## Architecture Overview

### Core Components

1. **Planet Generation** (`PlanetGenerator.java`)
   - Main orchestrator that generates planets and creatures in a tightly coupled workflow
   - Generates creative planet names from procedural name parts
   - Maps planet types and atmospheres to creature attributes
   - Manages the player's creature roster

2. **Creature Evolution** (`CreatureEvolutionManager.java`)
   - Applies two distinct mechanisms: **training** and **mutation**
   - Training: upgrades existing skills, adds positive traits (30% chance per trait)
   - Mutation: randomly adds/removes/modifies traits (25% spawn rate on creatures)
   - Uses separate pools: `POSITIVE_TRAITS`, `NEGATIVE_TRAITS`, `SKILL_LEVELS`

3. **Data Models**
   - `AICreature`: Wrapper around String array of attributes (traits, skills)
   - `Planet`: Simple name container
   - `AssetType`: Type/extension pair for game resources
   - `AssetManager`: Collection wrapper for assets

4. **Scene System** (`Scene.java`)
   - Minimal integration point; loads assets from `AssetManager` for display

## Key Patterns & Conventions

### Trait-Based Attributes
Creatures are defined entirely by string attributes stored in an array:
- **Skill format**: `"level:1"` through `"level:5"`
- **Trait format**: Named traits like `"adaptive"`, `"fragile"`, `"quick-learner"`
- **Speed format**: `"speed:low"`, `"speed:medium"`, `"speed:fast"`

When modifying creatures, always convert to `List<String>` for mutations, then back to array.

### Planet-to-Trait Mapping
Attributes are generated by combining two sources:
1. **Planet type** (Lava, Ice, Desert, Ocean, Forest) → environment resistance traits
2. **Atmosphere** (Oxygen-rich, Nitrogen, Methane, Carbon monoxide) → breathing/tolerance traits

Example: A Lava/Oxygen-rich planet creates creatures with `{"Heat Resistance", "Fire Breath", "High Endurance"}`.

### Procedural Name Generation
Names follow the pattern: `{Prefix}{Suffix}-{3DigitNumber}` 
- Prefixes: celestial/mythic words (Zyra, Vega, Orion)
- Suffixes: phonetic endings (lon, thar, dora)
- Numbers: 100-999

## Build & Execution

**Command**: `javac Planet.java PlanetGenerator.java && java PlanetGenerator`

Compiles all Java files and runs `PlanetGenerator.main()`, which:
1. Generates a single planet + creature pair
2. Creates a game asset list (textures, models, audio)
3. Loads assets into a Scene

**No external dependencies or test framework** — direct execution only.

## Critical Integration Points

### PlanetGenerator ↔ CreatureEvolutionManager
- `PlanetGenerator` instantiates `CreatureEvolutionManager` with a `Random` instance
- Calls `evolutionManager.updateCreatures(playerCreatures)` after creating creatures
- The evolution manager **mutates creatures in-place** via `creature.setAttributes()`

### AssetType Duplication Issue
⚠️ **Warning**: `AssetType` is defined **twice**:
1. Standalone class in `AssetType.java`
2. Inner class at end of `PlanetGenerator.java`

This will cause compilation conflicts. Remove the inner class definition from `PlanetGenerator.java` when encountered.

## Development Workflows

### Adding New Planet Types
1. Add type name to `planetTypes` array in `PlanetGenerator`
2. Add corresponding case in `generateAttributes()` switch statement
3. Include both environment AND atmosphere-based traits

### Adding New Creature Traits
1. Add to `POSITIVE_TRAITS` or `NEGATIVE_TRAITS` in `CreatureEvolutionManager`
2. If trait is skill-based, use `"level:X"` format and ensure `applyTraining()` recognizes it
3. If trait requires special mutation logic (like `sense` → `perception`), add case in `applyMutation()` switch

### Extending Evolution Logic
- **Training**: Occurs every cycle, guaranteed to run; modify `applyTraining()` for new skill upgrades
- **Mutation**: 25% trigger rate; scales probability based on population size if scaling needed
- Always output mutation/training results via `System.out.println()` for debugging

## Common Pitfalls

- **Trait Array Modification**: Never directly modify `creature.getAttributes()` — always convert to List, modify, convert back to array
- **Duplicate AssetType**: Check for inner class definition in `PlanetGenerator.java` on file read
- **Random Seeding**: `CreatureEvolutionManager` takes `Random` as constructor parameter; ensure seeded instances if deterministic tests needed
- **Attribute Naming**: Use consistent formatting (lowercase with hyphens for traits, `level:X` for skills)

## File Organization & Key Lines

- `PlanetGenerator.java`: Lines 75-90 contain `generatePlanetAndCreature()` orchestration logic
- `CreatureEvolutionManager.java`: Lines 45-80 show training application; Lines 85-145 show mutation logic
- Planet type mapping: `PlanetGenerator.java` lines 30-60
